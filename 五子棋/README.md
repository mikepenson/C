# 五子棋游戏

## 需求分析
- 五子棋游戏系统的主要功能是实现两人之间的对弈
- 选定五子棋游戏的棋盘为19*19，玩家在这个棋盘中选择落子的坐标位置。通过你在棋盘显示不同的颜色的棋子来代表不同的不同玩家所下的棋，白色圆心棋子代表玩家1，红色则代表玩家2，绿色实心原点代表两方棋子的运行轨迹，玩家每次按下落子键后系统会对落子位置进行检查，如果落子位置有错则不能落子，只有玩家输入正确的落子才能继续下棋。
- 当出现玩家的五子连成一线时，无论是行、列还是对角线，都表示该玩家游戏胜利，退出游戏。游戏中途也可以选择中途退出。

## 系统设计
### 设计目的
- 该系统可以实现玩家间的二人对弈，一方执白棋，一方执红棋，轮流走棋。每次都由玩家自行选择落子的位置，然后计算机自动识别判断游戏的进展，例如是否已经决出胜负。每一方都试图在游戏结束前让自己的棋子连成五子相连的状态。按下键盘的方向键可以移动棋子，移动轨迹用绿色棋子表示，按下回车键表示在当前位置落子。

### 设计思路
- 五子棋棋盘设计为19*19格，共有19*19=361个交叉点（落子位置），这是一个二维平面图，所以数据可以二维数组表示，数组上两个下标代表棋盘上坐标的位置，数组元素的值代表该坐标位置上的状态。
- 程序的主要工作是**接受棋手的按键操作**，棋手使用UP、DOWN、LEFT、RIGHT控制光标的移动，回车键代表落子。
- 成功落子后，要立即判断该位置为中心的八个方向（上下左右以及左上右上左下右下）上是否有相同颜色的五个棋子连成一线。

### 模块划分
根据游戏的设计思路可以将模块划分成五个部分：

- **主模块：**调用其他模块实现五子棋系统游戏功能。
- **棋盘模块：**棋盘模块的功能是绘制五子棋棋盘。
- **下棋模块：**下棋模块是让玩家在合法的位置下落子
- **功能控制模块：**该模块包含了三个功能函数，可能被其他函调用。主要功能是画棋子、判断胜负、行棋方转换。
- **信息模块：**信息模块的功能是进行信息的输出，包括欢迎信息、游戏结束提示和系统帮助信息。

### 用户界面的设计
- 欢迎页面：提示用户是否开始游戏
- 帮助信息
- 棋盘页面：交叉线，棋子

### 数据结构的设计
1. 坐标变换
 - 系统中使用了两种不同的坐标系统，需要从一类坐标映射到另一类坐标，这称为坐标变换。
 - 物理设备坐标系统：坐标的单位是像素，左上角是坐标原点，坐标轴正方向采用的是x轴向右，y轴向下。
 - 棋盘坐标系：为了编程方便，将棋盘上的纵行线从左向右依次用阿拉伯数字0~18标记，横行线自上向下依次用阿拉伯数字0~18标记，建立棋盘坐标系。此时棋盘的坐标范围就是（0，0）~（18，18）。
 - 假设期盼的坐标为（x,y），屏幕的坐标为（X，Y），则变换方式为：

 	X=OFFSET_x+x*OFFSET
 	Y=OFFSET_y+y*OFFSET

 	OFFSET_x\OFFSET_y偏移量是棋盘最左端/最上端到屏幕左边上边的距离
 	OFFSET是棋盘网格宽度
2. 数组
 - 定义一个二维数组status[N][N],其中N为19。status数组的行、列下标分别对应着棋盘的行列坐标，包含元素的个数为19*19.status数组存储给定坐标处的状态值。
 - status数组的取值有三种情况，分别是0、1、2。0表示给定坐标处没有棋子；1位置表示有棋子，且玩家为1的棋子；2表示玩家2的棋子。
3. 全局变量
 - 定义按键码

 	UP 0x4800,DOWN 0x5000,LEFT 0x4b00,RIGHT 0x4d00,ENTER 0x1c0d
 	ESC 0x011b
 - 设置偏移量

 	\#define OFFSET 20	/* OFFSET是棋盘中每个格的宽度 */

 	\#defin OFFSET_x 100	/*OFFSET_x是棋盘最左端到屏幕左边界的距离*/

 	\#define OFFSET_y 60
 - 棋盘的大小

 	#define N 19
 - 保存状态
 
 	status[N][N],step_x,step_y,flag,int flag00,int key

### 主函数设计
 - Borland图形接口（BGI）
 - 图形显示器与适配器
 - 显示器的两种工作模式
 - 图形系统的初始化与关闭
 - 错误处理




